# _Hornvale_::Specification

A semi-formal specification of Hornvale.

Rather than getting bogged down in implementation details immediately, I want to declare this idea [^1] in some kind of coherent, unambiguous fashion. You know, so I can just _write_ what I want instead of having to specify ownership semantics.

## World

The Game World can be modeled as a directed graph **_G_ = (_V_, _E_)** where:

- _V_ is a set of vertices, with each vertex _v_ ∈ _V_ representing a region in the game.
- _E_ is a set of edges, with each edge _e_ ∈ _E_ representing a passage between regions. An edge is an ordered pair (_v_<sub>_i_</sub>, _v_<sub>_j_</sub>) indicating a passage from region _v_<sub>_i_</sub> to region _v_<sub>_j_</sub>.

### World Seed

Each world is generated by a distinct seed value, the **World Seed**, which determines pseudorandom number generation through each of the subsequent layers of the world structure. Specifics of this are implementation details.

### Graph Generation

Vertices are generated on an infinite unit cartesian coordinate plane.

The initial vertex is always generated at (0, 0). It is given a seed value, a **Region Seed**, equal to that of the World Seed.

We expand outward, adding new vertices, using a discretized version of Bridson's algorithm (see [reference implementation](./bridson.py) and [example](./bridson_example.py)).

![Bridson's Algorithm](./images/bridson_example.png)

Each vertex is given a seed value equal to the World Seed modified by its own _x_ and _y_ coordinates (specifics are an implementation detail; this could be just concatenating the world seed and the _x_ and _y_ coordinates and hashed, or (_W_+_A_ ⋅ _x_<sup>2</sup> + _B_ ⋅ _y_<sup>3</sup>) mod _M_ where _A_ and _B_ are prime numbers and _M_ is a very large prime number close to `INT_MAX`, etc).

We connect the vertices using Prim's algorithm, which seems to be well-suited to incremental growth (see [reference implementation](./prim.py) and [example](./prim_example.py)).

![Prim's algorithm](./images/prim_example.png)

Then we can randomly add cycles (see [reference implementation](./add_cycles.py)).

![Cycles example](./images/cycles_example.png)

## Region




[^1]:  "You can't just say that your game exists."
  "I didn't say it. I _declared_ it."
